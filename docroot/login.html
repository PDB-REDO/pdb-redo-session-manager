<!DOCTYPE html SYSTEM "about:legacy-compat">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:z2="http://www.hekkelman.com/libzeep/m2" lang="nl">

<head z2:replace="~{head::head(~{::title},~{::head/script})}">
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<title>PDB-REDO Session Manager</title>

	<script src="scripts/login.js" type="text/javascript"></script>
</head>

<body>

	<script type="text/javascript">
		const nonce = /*[[${nonce}]]*/ null, username = /*[[${username}]]*/ null;
	</script>

	<nav z2:replace="~{menu :: navbar('session')}" />

	<div id="login-dialog" class="modal" z2:fragment="login-dialog" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="id_dialog_label">Use a local account to log in.</h5>
				</div>

				<div class="modal-body">

					<form id="local-login-form" z2:action="@{/login}" method="post" class="form-group">
						<input type="hidden" name="uri" z2:value="${uri ?: '/'}" />

						<div z2:if="${param.error}" class="alert alert-warning" role="alert">
							Invalid username and password.
						</div>
						<div z2:if="${param.logout}" class="alert alert-success" role="alert">
							You have been logged out.
						</div>

						<div class="form-group">
							<label for="username" class="col-md-4 control-label text-truncate">User name</label>
							<div class="col-md-8">
								<input class="form-control" id="username" maxlength="254" name="username"
									placeholder="User name" type="text" required="required" />
							</div>
						</div>

						<div class="form-group">
							<label for="password" class="col-md-4 control-label">Password</label>
							<div class="col-md-8">
								<input class="form-control" id="password" name="password" placeholder="Password"
									type="password" required="required" />
							</div>
						</div>

					</form>

					<span class="error" id="failedToLoginMsg" style="display: none">Login failed</span>

				</div>

				<div class="modal-footer">
					<div class="col-md-8">
						<a z2:href="@{/register}">register</a> /
						<a z2:href="@{/reset-password}">reset password</a>
					</div>

					<!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
					<button type="submit" form="local-login-form" class="btn btn-primary col-md-2 ms-auto">Log in</button>
				</div>
			</div>
		</div>
	</div>

</body>

</html>