<!DOCTYPE html SYSTEM "about:legacy-compat">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:z2="http://www.hekkelman.com/libzeep/m2" lang="nl">

<head z2:replace="~{head::head(~{::title},~{::head/script})}">
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<title>PDB-REDO Session Manager</title>

	<script z2:src="@{/scripts/test-api.js}"></script>
</head>

<body>

	<nav z2:replace="~{menu :: navbar('session')}" />

	<div class="container">

		<div class="row">
			<div class="column-sm mx-5 my-2">
				<h6>Token generator</h6>
				<form id="token-form" action="/api/session" method="post">
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">user name</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="user" name="user" type="text"
							required="true" />
					</div>
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">password</span>
						</div>
						<input class="form-control form-control-sm" maxlength="254" id="password" name="password"
							type="password" required="true" />
					</div>
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">session name</span>
						</div>
						<input class="form-control form-control-sm" maxlength="254" id="name" name="name" type="text"
							required="true" />
					</div>
					<button type="submit" form="token-form" class="btn btn-primary mt-3">Create</button>
				</form>
			</div>

			<div class="column-sm mx-5 my-2">

				<h6>Generated token</h6>

				<form id="delete-token-form">
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">name</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-name" name="token-name"
							type="text" readonly="readonly" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">id</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-id" name="token-id"
							type="number" readonly="readonly" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">token</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-secret"
							name="token-secret" type="text" readonly="readonly" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">expires</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-expires"
							name="token-expires" type="datetime" readonly="readonly" />
					</div>

					<button type="submit" form="delete-token-form" class="btn btn-primary mt-3">Delete</button>
				</form>
			</div>
		</div>

		<div class="row">
			<div class="column" style="width: 100%;">
				<hr />
			</div>
		</div>

		<div class="row">
			<div class="column mx-5 my-2">
				<h6>Fetch token</h6>

				<form id="fetch-token-form" action="#">
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">Token id</span>
						</div>
						<input class="form-control form-control-sm" maxlength="6" id="token-id" name="token-id"
							type="text" pattern="[0-9]+" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">Token secret</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-secret"
							name="token-secret" type="text" />
					</div>

					<button type="submit" form="fetch-token-form" class="btn btn-primary mt-3">Fetch</button>
				</form>
			</div>

			<div class="column mx-5 my-2">
				<h6>Fetch token result</h6>

				<form id="fetch-token-result">
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">name</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-name" name="token-name"
							type="text" readonly="readonly" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">expires</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-expires"
							name="token-expires" type="datetime" readonly="readonly" />
					</div>
				</form>
			</div>
		</div>

		<div class="row">
			<div class="column" style="width: 100%;">
				<hr />
			</div>
		</div>

		<div class="row">
			<div class="column mx-5 my-2">
				<h6>Submit Job</h6>

				<form id="submit-job-form" action="#" enctype="multipart/form-data">
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">Token id</span>
						</div>
						<input class="form-control form-control-sm" maxlength="6" id="token-id" name="token-id"
							type="text" pattern="[0-9]+" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">Token secret</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-secret"
							name="token-secret" type="text" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend" data-toggle="tooltip" data-placement="bottom" title="MTZ file">
							<span class="input-group-text" id="input-group-mtz-file">Diffraction data</span>
						</div>

						<div class="custom-file">
							<input type="file" class="custom-file-input" aria-describedby="input-group-mtz-file"
								name="mtz-file" id="mtz-file" />
							<label class="custom-file-label" for="mtz-file">Choose file</label>
						</div>
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend" data-toggle="tooltip" data-placement="bottom"
							title="PDB or mmCIF structure file">
							<span class="input-group-text" id="input-group-pdb-file">Coordinates</span>
						</div>

						<div class="custom-file">
							<input type="file" class="custom-file-input" aria-describedby="input-group-pdb-file"
								name="pdb-file" id="pdb-file" />
							<label class="custom-file-label" for="pdb-file">Choose file</label>
						</div>
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend" data-toggle="tooltip" data-placement="bottom"
							title="The restraints file is needed for new ligands or links, but not for common ligands or links already in the CCP4 dictionary, e.g. AMP, ATP, Glycerol, etc); if you are not certain if your ligand is already in the CCP4 dictionary, don't give a restraint file">
							<span class="input-group-text" id="input-group-restraints-file">Restraints</span>
						</div>

						<div class="custom-file">
							<input type="file" class="custom-file-input" aria-describedby="input-group-restraints-file"
								name="restraints-file" id="restraints-file" />
							<label class="custom-file-label" for="restraints-file">Choose file</label>
						</div>
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend" data-toggle="tooltip" data-placement="bottom"
							title="The sequence file will be used to attempt building missing loops, if homologous structures are available; it is also useful to know when to add OXT (terminal oxygen) if necessary and in general gives better results in homology restraints at low resolution refinement">
							<span class="input-group-text" id="input-group-sequence-file">Sequence</span>
						</div>

						<div class="custom-file">
							<input type="file" class="custom-file-input" aria-describedby="input-group-sequence-file"
								name="sequence-file" id="sequence-file" />
							<label class="custom-file-label" for="sequence-file">Choose file</label>
						</div>
					</div>

					<button type="submit" form="submit-job-form" class="btn btn-primary mt-3">Submit</button>
				</form>
			</div>

			<div class="column mx-5 my-2">
				<h6>Submit Job result</h6>

				<form id="submit-job-result">
					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">name</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-name" name="token-name"
							type="text" readonly="readonly" />
					</div>

					<div class="input-group input-group-sm mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">expires</span>
						</div>

						<input class="form-control form-control-sm" maxlength="254" id="token-expires"
							name="token-expires" type="datetime" readonly="readonly" />
					</div>
				</form>
			</div>
		</div>

		<div class="row">
			<div class="column" style="width: 100%;">
				<hr />
			</div>
		</div>


		<div class="row">
			<div class="column-sm mx-5 my-2">

				<h6>Using token</h6>

				<button type="button" id="fetch-runs-btn" class="btn btn-primary mt-3 mb-3">Fetch Runs</button>

				<table id="run-table" class="table table-striped table-sm">
					<thead>
						<tr>
							<th scope="run">Run</th>
							<th scope="run">Status</th>
						</tr>
					</thead>
					<tbody></tbody>
				</table>
			</div>
		</div>
	</div>

	<footer z2:replace="~{footer::content}" />
</body>

</html>